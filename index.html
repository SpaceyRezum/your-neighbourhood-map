<!DOCTYPE HTML>

<html>

	<head>
		<meta charset='UTF-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1.0'>
		<title>Your new neighborhood map</title>
		<meta description='Want to find what will be around you in your new neighborhood, enter the address and find out!'>
		<link href='https://fonts.googleapis.com/css?family=Montserrat' rel="stylesheet">
		<link rel='stylesheet' type='text/css' href='css/main.css'>
	</head>

	
	<body>
		<header>
			<div id='nav-bar'>
				<div id='input-section'>
					<form>
						<p>Start checking what's cool in your hood!</p>
						<input id='address' type='address' placeholder='Please enter an address...'>&nbsp;
						<!-- I used the click workaround because a textInput data-bind on the input field did not update the address observable when google autocomplete suggestions where used -->
						<button type='submit' data-bind='click: function(data, event) {
							compareAddresses($("#address")), resetFilter($("#filter-container"))
							}'>Search</button>
					</form>
				</div>

				<div id='filter-container'>
					<!-- button to load the favorite venues as suggestionList -->
					<div class='favorite-list'>
						<button type='button' data-bind='click: $root.loadFavoriteList'>Favorites</button>
					</div>
				</div>
			</div>	
		</header>

		<content id='top-container'>
			<div id='sidebar'>
				<div id='result-section' data-bind='visible: formattedAddress().length > 0'>
					<p>You searched for:</p>
					<p data-bind='text: formattedAddress'></p>

					<div id='address-confirmation' data-bind='visible: !formattedAddress().includes(ViewModel.errorStatus)'>
						<div data-bind='visible: locationConfirm() === "not set"'>
							<p>Is this the location you are looking for?</p>
							<button data-bind='click: function() {confirmLocation(), createMarkersAndFitBounds()}'>Yes</button>
							<button data-bind='click: specifyLocation'>No</button>
						</div>
						<div data-bind='visible: locationConfirm() === "not confirmed"'>
							<p>
								Try more specific research queries (ex: adding a country, state, region, etc.)
							</p>
						</div>
					</div>

					<div id='confirmed-address-details' data-bind='visible: locationConfirm() === "confirmed"'>

						<!-- button to display / hide transit options if available -->
						<div class='transit-display'>
							<button type='button' data-bind='click: getTransitOptions'><span data-bind='text: displayOrHideTransit'></button>
						</div>

						<!-- Form to select venue category filter -->
						<div class='category-filter-container' data-bind='visible: formattedAddress() !== "Favorited Venues"'>
							<form>
								Filter categories: &nbsp;&nbsp;
								<select id='filter-categories' name="categories">
									<option value="none">All</option>
									<option value="food">Serving food</option>
									<option value="drinks">Serving drinks</option>
									<option value="coffee">Cafes</option>
									<option value="shops">Shops</option>
									<option value="arts">Arts</option>
									<option value="outdoors">Outdoors</option>
									<option value="sights">Sights</option>
								</select>
								&nbsp;&nbsp;
								<button type='submit' data-bind='click: function(data, event) {compareAddresses($("#address"), $("#filter-categories")[0].value)}'>Filter</button>
							</form>
						</div>

						<div>
						 <p>Here's the top <span data-bind='text: suggestionList().length'></span> suggestions for the address &amp; filter you chose</p>
						</div>

						<div id='suggestion-list' data-bind="foreach: suggestionList">
							<div class='suggestion-list-item' data-bind='event: {click: function(data, event) {$root.toggleMarkerAnimationAndListItemStyle($index(),event.target)}}, attr: {id: "item-" + $index()}'>
								<div class='item-number' data-bind='text: $index() + 1'></div>
								<div class='item-details'>
									<p class='item-title' data-bind='text: name'></p>
									<p class='item-type' data-bind='text: categories[0].name'></p>
									<p class='item-address'><span data-bind='text: location.address'></span> - <span data-bind='text: location.city'></span></p>
								</div>
								<div class='favorite-container'>
									<button data-bind='click: $root.favorite, attr: {class: favorited() ? "favorited" : "fav-star"}'></button>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>


			<div id='map-container'></div>

			<script
			  src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'
			  integrity='sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8='
			  crossorigin='anonymous'></script>
			<script async defer src='https://maps.googleapis.com/maps/api/js?key=AIzaSyCkthdQIGq5r03DTZtEPoae2qq033vibxo&libraries=places&callback=ViewModel.initMap'></script>
			<script type='text/javascript' src='frameworks/knockout-v3.4.1.js'></script>
			<script type='text/javascript' src='app.js'></script>
		</content>
	</body>
</html>